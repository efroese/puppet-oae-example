# HEADER: This file was autogenerated by puppet.
# HEADER: While it can still be managed manually, it is definitely not recommended.
# .bash_profile
shopt -s histappend
shopt -s histverify
shopt -s cdspell
export HISTSIZE=5000
export HISTFILESIZE=5000
export HISTCONTROL=ignoreboth:erasedups
export INPUTRC=$HOME/.inputrc
export EDITOR=nano
export LSCOLORS=hxfxcxdxbxegedabagacad
export LC_CTYPE=en_US.UTF-8

c_cyan=`tput setaf 6`
c_red=`tput setaf 1`
c_green=`tput setaf 2`
c_sgr0=`tput sgr0`
parse_git_branch ()
{
    if git rev-parse --git-dir >/dev/null 2>&1
    then
        git_status="$(git status 2> /dev/null)"
        branch_pattern="^# On branch ([^${IFS}]*)"
        remote_pattern="# Your branch is (.*) of"
        diverge_pattern="# Your branch and (.*) have diverged"
        # add an else if or two here if you want to get more specific
        if [[ ${git_status} =~ ${remote_pattern} ]]; then
          if [[ ${BASH_REMATCH[1]} == "ahead" ]]; then
            remote="↑"
          elif [ ${BASH_REMATCH[1]} == "behind" ]]; then
            remote="↓"
          fi
        fi
        if [[ ${git_status} =~ ${diverge_pattern} ]]; then
          remote="↕"
        fi
        if [[ ${git_status} =~ ${branch_pattern} ]]; then
          branch=${BASH_REMATCH[1]}
          echo "${branch}${remote}"
        fi
    else
        return 0
    fi
}
branch_color ()
{
    if git rev-parse --git-dir >/dev/null 2>&1
    then
        git_status="$(git status 2> /dev/null)"
        color=""
        if [[ ${git_status} =~ "working directory clean" ]]; then
            color="${c_green}"
        else
            color=${c_red}
        fi
    else
        return 0
    fi
    echo -ne $color
}
export PS1='[\[$(branch_color)\]$(parse_git_branch)\[${c_sgr0}\]] \u@\h \w\[${c_sgr0}\]$ '
# export PS1='\w$ '

export CLICOLOR=1
export GREP_OPTIONS='--color=auto'
export GREP_COLOR='1;33'

# Get the aliases and functions
if [ -f ~/.bashrc ]; then
	. ~/.bashrc
fi

# User specific environment and startup programs

PATH=$PATH:$HOME/bin

export PATH

export PUPPET_HOME=${HOME}/puppet-oae

alias ll='ls -lGh'
alias l='ls -laGh'
alias lt='ls -ltGh'
alias md='mkdir'

export JAVA_OPTS="-server -Xmx1g -XX:MaxPermSize=512m -XX:NewRatio=3 \
-XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+CMSParallelRemarkEnabled \
-XX:MaxTenuringThreshold=0 -XX:-DisableExplicitGC -XX:CMSInitiatingOccupancyFraction=80 \
-XX:+UseStringCache -XX:+UseCompressedStrings -XX:+OptimizeStringConcat \
-Djava.awt.headless=true -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCTimeStamps \
-XX:+PrintGCDateStamps -XX:+PrintTenuringDistribution \
-XX:+PrintCommandLineFlags"
export MAVEN_OPTS='-Xmx1g -XX:MaxPermSize=512m'

# bash-completion
if [ -f /etc/bash_completion ]; then
    . /etc/bash_completion
fi
